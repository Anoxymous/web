<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peak Seach</title>
    <script async type="text/javascript" src="https://www.peakfinder.com/script/peakfinder.1.0.min.js"></script>
<!--    <script async type="text/javascript" src="./pf-min.js"></script> -->
		<script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<link rel="stylesheet" href="lo-styles.css" />
		<link rel="stylesheet" href="ui-styles.css" />
		<link rel="stylesheet" href="pf-styles.css" />
		<link rel="stylesheet" href="om-styles.css" />
</head>
<body onload="window_load()">
    <div class="container">
				<div class="bar-logo" id="bar-logo">L</div>
				<div class="bar-tabs" id="bar-tabs">
							<div class="bar-button" onclick="showTab('e')">e</div>
							<div class="bar-button" onclick="showTab('m')">m</div>
							<div class="bar-button" onclick="toggleTab('i')">i</div>
				</div>
				<div class="bar-controls" id="bar-controls">
							<div id="button-l" class="bar-button" onclick="toggleToolbar()">
								l
								<div class="pop-out-toolbar-up" id="toolbar-views2">
									<div class="bar-button" onclick="toggleTab('page_peaks')">s2</div>
									<div class="bar-button" onclick="toggleTab('page_map')">h2</div>
									<div class="bar-button" onclick="toggleTab('i')">v2</div>
								</div>
							</div>
							<div class="bar-button" onclick="showTab('page_map')">t</div>
							<div  id="button-v"  class="bar-button" onclick="toggleToolbar()">
								v
								<div class="pop-out-toolbar-up" id="toolbar-views">
									<div class="bar-button" onclick="toggleView('s')">s</div>
									<div class="bar-button" onclick="toggleView('h')">h</div>
									<div class="bar-button" onclick="toggleView('v')">v</div>
								</div>
							</div>
				</div>
				<div class="contents-floater" id="contents-info">Info</div>
					
				<div class="float-container-s" id="float-container-s">
					<div class="contents-holder" id="contents-map">
						<div class="map-holder" id="map"></div>
					</div>
					<div class="contents-holder" id="contents-eye">
						<div id="pf_canvas_holder"></div>
					</div>
					
				</div>
			
				
				<div class="float-container-v" id="float-container-v">
					<div class="floater-top" id="div-dock-top"></div>
					<div class="floater-resizer-v" id="div-dock-resizer-v"></div>
					<div class="floater-bottom" id="div-dock-bottom"></div>
				</div>
				
				<div class="float-container-h" id="float-container-h">
					<div class="floater-left" id="div-dock-left"></div>
					<div class="floater-resizer-h" id="div-dock-resizer-h"></div>
					<div class="floater-right" id="div-dock-right"></div>
				</div>
				
    </div>
   
		<script type="text/javascript" src="om-scripts.js"></script>
		<script type="text/javascript" src="pf-scripts.js"></script>
		<script type="text/javascript" src="lo-scripts.js"></script>
    <script>
	
  
function updateMapLocation(lat, lon, name)
{
   om_updateMapLocation(lat, lon, name)
	 pf_setLocation(lat, lon, name)
}


function map_search_init()
{

						        $("#searchInput").on("input", function() {
            var query = $(this).val();
            if (query.length < 3) {
                $("#autocompleteList").hide();
                return;
            }

            $.getJSON(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`, function(data) {
                var list = $("#autocompleteList");
                list.empty();
                if (data.length > 0) {
                    list.show();
                    data.forEach(function(item) {
                        list.append('<div class="autocomplete-item" data-lat="${item.lat}" data-lon="${item.lon}">${item.display_name}</div>');
										});
                } else {
                    list.hide();
                }
            });
        });

        $(document).on("click", ".autocomplete-item", function() {
            var lat = $(this).data("lat");
            var lon = $(this).data("lon");
            $("#latInput").val(lat);
            $("#lonInput").val(lon);
            $("#autocompleteList").hide();
						updateMapLocation(lat, lon)
        });
				
}

				function handleLocationChange() {
            var lat = document.getElementById("latInput").value;
            var lon = document.getElementById("lonInput").value;

						updateMapLocation(lat, lon)
        }
				
        function toggleSearch() {
            var searchBox = document.getElementById("searchBox");
            searchBox.style.display = searchBox.style.display === "none" ? "block" : "none";
        }

function window_load() {
   layouts_init();
   initialize_map();
   add_map_point(-33.8688, 151.2093); 
//   map_search_init()
	 
	pf_init(-27.909281, 153.109104, 'Albert River')
	pf_setPosition(46.53722, 8.12610, 'Finsteraarhorn', 3, 270, 10, 45)
	pf_setTime(2026, 9, 26, 07, 30)
 }
 
    </script>
	

</body>
</html>
