<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peak Seach</title>
    <script async type="text/javascript" src="https://www.peakfinder.com/script/peakfinder.1.0.min.js"></script>
<!--    <script async type="text/javascript" src="./pf-min.js"></script> -->
		<script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script type="text/javascript" src="lib\ui\ui-scripts.js"></script>

		<link rel="stylesheet" href="lib\lo\lo-styles.css" />
		<link rel="stylesheet" href="lib\ui\ui-styles.css" />
		<link rel="stylesheet" href="lib\pf\pf-styles.css" />
		<link rel="stylesheet" href="lib\om\om-styles.css" />
</head>
	<body onload="window_load()">
		<div class="container">
				<div class="bar-logo" id="bar-logo">L</div>
				<div class="bar-tabs" id="bar-tabs">
							<div
							  class="bar-button"
							  onclick="showTab('e')"
							  style="background-image: url('img/icons/eye.svg');" ></div>
							<div
								class="bar-button"
								onclick="showTab('m')"
								style="background-image: url('img/icons/map.svg');" >
							</div>
							<div
								class="bar-button"
								onclick="toggleTab('contents-info')"
					    	style="background-image: url('img/icons/info.svg');" >
							</div>
				</div>
				<div class="bar-controls" id="bar-controls">
							<div
								class="bar-button"
								onclick="toggleTab('locations-form-holder')"
								style="background-image: url('img/icons/loc.svg');" >
							</div>
							<div
								class="bar-button"
								onclick="toggleTab('t')"
								style="background-image: url('img/icons/date.svg');" >
							</div>
							<div
								id="button-v" 
								class="bar-button"
								onclick="toggleToolbar()"
								style="background-image: url('img/icons/layouts.svg');" >
								<div class="pop-out-toolbar-up" id="toolbar-views">
									<div class="bar-button" onclick="toggleView('s')" style="background-image: url('img/icons/layout_s.svg');"></div>
									<div class="bar-button" onclick="toggleView('h')" style="background-image: url('img/icons/layout_h.svg');"></div>
									<div class="bar-button" onclick="toggleView('v')" style="background-image: url('img/icons/layout_v.svg');"></div>
								</div>
							</div>
				</div>
				<div class="contents-floater" id="contents-info">Info</div>
				
				<div class="contents-floater" id="locations-form-holder" style="left: 10%; top: 50%;" >
					<div class="ui_form" id="location-form">
						<h2>Jump to Location</h2>
							<form onsubmit="event.preventDefault();">
							<input type="text" id="location" placeholder="Enter Name..." required>
							<input type="text" id="latitude" placeholder="Latitude" required>
							<input type="text" id="longitude" placeholder="Longitude" required>
							<button type="submit">Go</button>
						</form>
					</div>
				</div>
				
				<div class="float-container-s" id="float-container-s">
					<div class="contents-holder" id="contents-map">
						<div class="map-holder" id="map"></div>
					</div>
					<div class="contents-holder" id="contents-eye">
						<div id="pf_canvas_holder"></div>
					</div>
					
				</div>
			
				
				<div class="float-container-v" id="float-container-v">
					<div class="floater-top" id="div-dock-top"></div>
					<div class="floater-resizer-v" id="div-dock-resizer-v"></div>
					<div class="floater-bottom" id="div-dock-bottom"></div>
				</div>
				
				<div class="float-container-h" id="float-container-h">
					<div class="floater-left" id="div-dock-left"></div>
					<div class="floater-resizer-h" id="div-dock-resizer-h"></div>
					<div class="floater-right" id="div-dock-right"></div>
				</div>
				
    </div>
   
		<script type="text/javascript" src="lib\om\om-scripts.js"></script>
		<script type="text/javascript" src="lib\pf\pf-scripts.js"></script>
		<script type="text/javascript" src="lib\lo\lo-scripts.js"></script>
	  <script type="text/javascript" src="this-scripts.js"></script>
	  
    <script>
  

function map_search_init()
{

						        $("#searchInput").on("input", function() {
            var query = $(this).val();
            if (query.length < 3) {
                $("#autocompleteList").hide();
                return;
            }

            $.getJSON(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`, function(data) {
                var list = $("#autocompleteList");
                list.empty();
                if (data.length > 0) {
                    list.show();
                    data.forEach(function(item) {
                        list.append('<div class="autocomplete-item" data-lat="${item.lat}" data-lon="${item.lon}">${item.display_name}</div>');
										});
                } else {
                    list.hide();
                }
            });
        });

        $(document).on("click", ".autocomplete-item", function() {
            var lat = $(this).data("lat");
            var lon = $(this).data("lon");
            $("#latInput").val(lat);
            $("#lonInput").val(lon);
            $("#autocompleteList").hide();
						updateMapLocation(lat, lon)
        });
				
}

				function handleLocationChange() {
            var lat = document.getElementById("latInput").value;
            var lon = document.getElementById("lonInput").value;

						updateMapLocation(lat, lon)
        }
				
        function toggleSearch() {
            var searchBox = document.getElementById("searchBox");
            searchBox.style.display = searchBox.style.display === "none" ? "block" : "none";
        }


 
    </script>
	

</body>
</html>
